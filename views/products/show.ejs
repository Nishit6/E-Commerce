<%- include("../partials/header") %> 
<%- include("../partials/navbarRes") %> 
<link rel="stylesheet" href="/star.css">
<br>

<h2 style="color: slategrey; margin-left: 10px; font-family: 'Times New Roman', Times, serif;">Details</h2>
<hr>


<%- include("../partials/flash") %> 

    <div class="container">
      <div class="row">
        <div class="col-lg-6 col-md-12 col-sm-12">

          <div class="card card text-center mb-5" style=" margin-left: 20px;margin-top: 50px; box-shadow: 1px 0px 2px gray; width: 29rem;">
     
            <img  style="max-height: 50vh; padding: 20px;"  src="<%= showProduct.img %> " class="card-img-top" >
            <div class="card-body" >
              <h3 class="card-title"><%=showProduct.name%></h3>
            
              <p class="card-text"><%=showProduct.desc%></p>
    
              <a href="/products/<%= showProduct._id %>/edit " class="btn btn-success">EDIT</a>
    
              
              <form style="display: inline;padding: 3px;" class="mt-3" action="/user/<%= showProduct._id %>/cart " method="POST">
                <button type="submit" class="btn btn-primary">Add to Cart</button>
              </form>
             
           
           
              <form style="display: inline;"action="/products/<%= showProduct._id %>?_method=DELETE " method="POST">
                <form action="/products/<%= showProduct._id %>?_method=DELETE " method="POST">
                
                  <% if(currentUser) {%> 
                    <% if(currentUser.role === 'Retailer') {%> 
                <button class="btn btn-danger">DELETE</button>
                <% } %> 
                <% } %>  
            </form>
         
            </div>
                
          </div>

        </div>
        <div class="col-md-6  ">

                    
          <div class="mt-5" >

            <h5 class="display-5" style="color: cadetblue;margin-left: 20px;"> Leave a review</h5>
          
        
          <form action="/products/<%= showProduct._id %>/Reviews  " method="post" style="margin-left: 20px;margin-bottom: 20px;">
            <div  style=" min-width:40vw; border: 1px solid #ccc; padding: 40px;">
              <label for="rating" class="form-label">Give Rating</label>
              <!-- <input type="range" min="0" max="5" class="form-range" id="rating" name="rating"> -->
              <fieldset class="starability-slot">
                
                <input type="radio" id="no-rate" class="input-no-rate" name="rating" value="0" checked aria-label="No rating." />
                <input type="radio" id="first-rate1" name="rating" value="1" />
                <label for="first-rate1" title="Terrible">1 star</label>
                <input type="radio" id="first-rate2" name="rating" value="2" />
                <label for="first-rate2" title="Not good">2 stars</label>
                <input type="radio" id="first-rate3" name="rating" value="3" />
                <label for="first-rate3" title="Average">3 stars</label>
                <input type="radio" id="first-rate4" name="rating" value="4" />
                <label for="first-rate4" title="Very good">4 stars</label>
                <input type="radio" id="first-rate5" name="rating" value="5" />
                <label for="first-rate5" title="Amazing">5 stars</label>
              </fieldset>
              
              
        
              <div class="mb-4 mt-2"  >
                <label for="comment" class="form-label">add comment</label>
                <textarea class="form-control" id="comment" rows="3" name="comment"></textarea>
              </div>
                <button class="btn btn-primary mt-3">ADD</button>
             
              </form>
        
        <hr>
        
        
        
          
        
          <div class="card text-center mb-3 mt-3" style="border: none;">
        
            <% for(let review of  showProduct.reviews) {%> 
            
           <br>
        
            
              <h5 class="text-capitalize"><%= review.user %></h5>
              <p class="card-text" style="color: rgb(90, 90, 90);">Review : <%= review.comment %> </p>
              <p class="starability-result " data-rating="<%= review.rating %>"> </p>
             
        
             
         <% } %>  
        </div>  
         
                    
            
        </div> 
        
        
        
        
              
             
        
        
         
        
        </div>
      </div>
    </div>


  
     
     

   


  <%- include("../partials/footer") %> 